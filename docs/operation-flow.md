# 操作フロー

このドキュメントでは、Miro-Redmine Integrationを使用した基本的な操作フローについて説明します。このツールを使って、RedmineチケットとMiroボードを効率的に連携させる方法を学びましょう。

## 準備

操作を始める前に、以下の準備が完了していることを確認してください：

1. [installation.md](installation.md)の手順に従ってツールがインストールされていること
2. [board-setup.md](board-setup.md)の手順に従ってMiroボードが設定されていること
3. 連携するRedmineプロジェクトが正しく設定されていること

## システム連携フロー図

以下の図は、Miro-Redmine Integrationの基本的な連携フローを示しています：

![Miro-Redmine基本連携フロー](images/miro-redmine-flow-diagram.png)

### 双方向同期の仕組み

1. **Redmineからの更新**:
   - Redmineチケットが更新されると、ウェブフックがトリガーされます
   - 統合サーバーがウェブフックを受け取り、対応するMiroカードを更新します
   - 変更がMiroボード上に反映されます

2. **Miroからの更新**:
   - Miroボード上のカードが移動/編集されると、ウェブフックがトリガーされます
   - 統合サーバーがウェブフックを受け取り、対応するRedmineチケットを更新します
   - 変更がRedmine上に反映されます

## 基本的な操作フロー

### 1. 初期同期

ツールを初めて使用する場合、まずはRedmineのチケットをMiroボードに同期させる必要があります：

1. Miro-Redmine Integration管理画面（`http://localhost:3000`）にアクセスします。
2. 「同期」タブをクリックします。
3. 「初期同期」ボタンをクリックします。
4. 進捗バーが表示され、同期の状況が表示されます。
5. 同期が完了すると、Miroボードに全てのアクティブなRedmineチケットが表示されます。

### 2. Redmineチケットの更新とMiroボードへの反映

Redmineでチケットを更新すると、自動的にMiroボードに反映されます：

1. Redmineにログインし、対象のプロジェクトを開きます。
2. チケットを更新します（例：ステータスの変更、担当者の変更、コメントの追加など）。
3. 同期設定に応じて、変更は自動的にMiroボードに反映されます：
   * 「リアルタイム同期」を有効にしている場合: 数秒〜1分以内に反映されます
   * 「定期同期」を有効にしている場合: 設定された間隔（デフォルトは5分）で反映されます
   * どちらも無効の場合: 管理画面から「手動同期」を実行する必要があります

### 3. Miroボード上でのチケット操作

Miroボード上でもチケットを操作でき、その変更はRedmineに反映されます：

#### チケット移動（ステータス変更）

1. Miroボードで対象のチケットカードを選択します。
2. カードを別のカラム（ステータス）にドラッグ＆ドロップします。
3. 確認ダイアログが表示されたら「はい」をクリックします。
4. 数秒後、Redmineでそのチケットのステータスが変更されます。

#### チケット編集

1. Miroボードで対象のチケットカードをダブルクリックします。
2. 編集可能なフィールドが表示されたダイアログが開きます。
3. 必要な情報を編集します（件名、説明、優先度など）。
4. 「保存」ボタンをクリックします。
5. 変更がRedmineに反映されます。

#### コメント追加

1. Miroボードで対象のチケットカードを右クリックします。
2. コンテキストメニューから「コメント追加」を選択します。
3. コメント入力ダイアログが表示されるので、コメントを入力します。
4. 「送信」ボタンをクリックします。
5. コメントがRedmineのチケットに追加されます。

### 4. 新規チケット作成

Miroボードから直接新規チケットを作成することもできます：

1. Miroボードのツールバーから「Redmineチケット作成」ボタンをクリックします。
2. チケット作成フォームが表示されます。
3. 必要な情報を入力します：
   * タイトル（必須）
   * 説明
   * 優先度
   * 担当者
   * 期日
   * その他のカスタムフィールド
4. 「作成」ボタンをクリックします。
5. 新しいチケットがRedmineに作成され、同時にMiroボードに追加されます。
6. ボード上で適切な位置（ステータスに応じたカラム）に配置されます。

### 5. フィルタリングと検索

Miroボード上のチケットをフィルタリングして、必要な情報だけを表示することができます：

1. Miroボードのツールバーから「フィルター」ボタンをクリックします。
2. フィルター条件を設定します：
   * ステータス（複数選択可）
   * 優先度（複数選択可）
   * 担当者（複数選択可）
   * トラッカー（バグ、タスク、機能など）
   * キーワード検索
3. 「適用」ボタンをクリックします。
4. 条件に合致するチケットだけが表示されます。
5. フィルターをクリアするには「リセット」ボタンをクリックします。

### 6. ボードのリフレッシュ

最新の状態に更新したい場合や、同期エラーが発生した場合は、手動でボードをリフレッシュできます：

1. Miroボードのツールバーから「リフレッシュ」ボタンをクリックします。
2. または管理画面の「同期」タブから「強制再同期」ボタンをクリックします。
3. 全てのチケットが最新の状態に更新されます。

## 実例：スプリント計画から実行までのワークフロー

以下は、Miro-Redmine Integrationを使用したスクラム/アジャイル開発の一般的なワークフローの例です：

### スプリント計画（Sprint Planning）

1. Miroボードを開き、「バックログ」カラムにあるチケットを確認します。
2. チームミーティングで各チケットを議論し、優先順位や見積もりを決定します。
3. Miroボード上で、スプリントに含めるチケットを「ToDo」カラムにドラッグします。
   * この操作によって、Redmineのチケットステータスが自動的に更新されます。
4. 必要に応じて、チケットをクリックして詳細を編集します（見積時間、担当者など）。

### デイリースクラム（Daily Scrum）

1. 毎日のミーティングでMiroボードを開き、現在の状況を確認します。
2. 各メンバーが担当しているチケットの状況を更新します：
   * 進行中のタスクは「進行中」カラムに移動
   * 完了したタスクは「レビュー」または「完了」カラムに移動
3. 障害やブロッカーがある場合は、チケットにコメントを追加するか、赤いフラグでマークします。

### スプリントレビュー＆スプリント終了

1. スプリント終了時に、Miroボード上で完了したチケットを確認します。
2. 「完了」カラムにあるチケットを確認し、全てのタスクが適切に完了しているか検証します。
3. 未完了のチケットは、次のスプリントに移動するか、バックログに戻します。
4. スプリントの振り返り（レトロスペクティブ）には、Miroの他の機能（付箋、投票など）も活用できます。

## 実例：チーム別ユースケースシナリオ

### 小規模開発チーム（5人以下）のワークフロー

**チーム構成:**
- プロジェクトマネージャー1名
- 開発者3名
- デザイナー1名

**ワークフロー例:**

1. **月曜日：スプリント計画**
   - チーム全員がMiroボードを開きます
   - PMがバックログからチケットを「ToDo」列に移動し、優先順位を決定します
   - 開発者が各チケットを選択し、担当者に自分を割り当てます
   - カードの色は優先度で色分けされています（赤=高、黄=中、緑=低）

   ![小規模チームスプリント計画](images/small-team-sprint-planning.png)

2. **毎日：デイリースタンドアップ**
   - 10分間のビデオ会議でMiroボードを確認します
   - 各メンバーが担当チケットの進捗を共有し、必要に応じてカードを移動します
   - ブロッカーがある場合は、カードに赤いフラグを付けます

3. **金曜日：週次レビュー**
   - 完成したタスクを「レビュー」から「完了」に移動します
   - 次週に持ち越すタスクについて議論します
   - ボード上で次週の予定を視覚的に整理します

### 中規模チーム（5-15人）のワークフロー

**チーム構成:**
- プロダクトオーナー1名
- スクラムマスター1名
- バックエンド開発者4名
- フロントエンド開発者3名
- QAエンジニア2名
- デザイナー2名

**ワークフロー例:**

1. **スプリント開始時**
   - チームごとに色分けされたエリアを持つMiroボードを使用します
   - チームリーダーが優先順位ミーティングを実施し、チケットを担当チームの「ToDo」列に割り当てます
   - 各チームが自分のエリアのチケットに対して見積りを行います

   ![中規模チーム計画ボード](images/medium-team-board-planning.png)

2. **デイリーワークフロー**
   - 朝のチームスタンドアップでチーム別の進捗を確認します
   - 日中は各自がカードを更新し、進捗状況を反映させます
   - チーム間の依存関係はボード上の矢印で表示されます

3. **定期的な調整**
   - 週2回、チーム横断ミーティングでボード全体を確認します
   - ボトルネックや依存関係の問題を視覚的に特定し解決します
   - 優先順位の変更があれば、POがカードを移動し、自動でRedmineに反映されます

### 大規模/分散チーム（15人以上）のワークフロー

**チーム構成:**
- 複数のスクラムチーム
- 地理的に分散したチームメンバー
- 異なるタイムゾーンでの作業

**ワークフロー例:**

1. **階層化されたボード構造**
   - エピックレベルのマスターボード
   - チームごとの詳細ボード
   - 各ボードはRedmineプロジェクト/サブプロジェクトと連携

   ![大規模チーム階層ボード](images/large-team-hierarchy.png)

2. **非同期コラボレーション**
   - 各チームは自分の担当ボードを更新します
   - 変更は自動的にRedmineとマスターボードに反映されます
   - コメント機能を使って非同期コミュニケーションを行います

3. **定期的な同期ミーティング**
   - 週1回のスクラムオブスクラムでマスターボードを使用します
   - 各チームの代表者が進捗と課題を共有します
   - 依存関係の調整と全体進捗の確認を行います

## チーム規模別の利用方法

チームの規模に応じた効果的な利用方法を以下に示します：

### 小規模チーム向け (5人以下)

**推奨設定:**
- 単一のシンプルなボード
- 全員が編集権限を持つ
- 手動同期でも十分対応可能

**効果的な使用方法:**
- 週次ミーティングでの共同編集
- リアルタイムの状況共有
- 柔軟なレイアウト変更

**使用例:**
スタートアップやプロジェクトチームでは、シンプルなカンバンボードを中心に、全員が自由にカードを移動させながら進捗を管理。週1回の全体ミーティングでボードを見ながら戦略を議論し、その場で次のアクションアイテムをRedmineチケットとして作成。

![小規模チーム利用例](images/small-team-usage.png)

### 中規模チーム向け (5-15人)

**推奨設定:**
- チームまたは機能別にセクション分け
- 定期的な自動同期
- フィルター機能の活用

**効果的な使用方法:**
- デイリースタンドアップでの進捗確認
- チーム間の依存関係の可視化
- カラーコーディングによる優先度表示

**使用例:**
製品開発チームでは、フロントエンド、バックエンド、QAの各チームがボード上の専用エリアを持ち、朝のスタンドアップミーティングでそれぞれの進捗を確認。チケット間の依存関係は矢印で表示し、ボトルネックを早期に発見。週末には完了したチケットをアーカイブして次週の準備を行う。

![中規模チーム利用例](images/medium-team-usage.png)

### 大規模チーム向け (15人以上)

**推奨設定:**
- 階層化されたボード構造
- 自動同期の完全活用
- アクセス権限の詳細設定

**効果的な使用方法:**
- マスターボードと詳細ボードの連携
- ダッシュボード的な全体把握
- チームの進捗状況の比較

**使用例:**
エンタープライズ開発では、製品全体のロードマップをマスターボードで管理し、各機能チームが詳細ボードで開発を進める。週1回のプログラムレビューではマスターボードを使って全体進捗を確認し、リソース再配分や優先順位の調整を行う。地理的に分散したチームも同じ情報を見ながら意思決定できる。

![大規模チーム利用例](images/large-team-usage.png)

## チームでの効果的な使用方法

### リモートチーム向け

1. 定期的なビデオ会議と合わせてMiroボードを共有画面で表示
2. チーム全員がリアルタイムで同じボードを見ながら作業
3. コメント機能を積極的に活用して、非同期のコミュニケーションを促進

### ハイブリッドチーム向け

1. オフィスの大画面モニターにMiroボードを表示
2. リモートメンバーもビデオ会議を通じて同じボードを確認
3. 全員が同じ情報を見ながら議論できる環境を構築

### スクラムマスター/プロジェクトマネージャー向け

1. 毎日のスタンドアップミーティングでボードを活用
2. チケットの進捗状況をビジュアルで把握
3. ボトルネックやブロッカーを早期に発見

## トラブルシューティング

操作中に問題が発生した場合は、[troubleshooting.md](troubleshooting.md)を参照してください。一般的な問題と解決策が記載されています。
